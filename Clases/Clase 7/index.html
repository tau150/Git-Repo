<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
<script type='text/javascript'>


arrGigante=[ '2015-05-04T18:04:54.320Z, South Georgia and the South Sandwich Islands,5.4,mb,,54,5.654,1.03,us,us20002b8y,2015-05-04T18:23:43.605Z,"21km NNW of Visokoi Island, South Georgia and the South Sandwich Islands",earthquake',
  '2015-05-04T16:19:30.989Z, Nevada,3.18,ml,5,85.4,0.736,0.1914,nn,nn00492670,2015-05-04T17:02:50.040Z,"42km NNW of Currant, Nevada",earthquake',
  '2015-05-04T14:50:24.490Z, Oklahoma,3,mb_lg,,61,0.492,0.29,us,us20002b70,2015-05-04T15:40:47.237Z,"22km W of Perry, Oklahoma",earthquake',
  '2015-05-04T14:42:35.350Z, Hawaii,3.58,ml,29,78,0.0114,0.07,hv,hv60916001,2015-05-04T18:32:59.294Z,"5km S of Volcano, Hawaii",earthquake',
  '2015-05-04T14:42:10.700Z, Hawaii,3.6,ml,,96,0.02,0.2,us,us20002b77,2015-05-04T16:44:40.418Z,"4km SSW of Volcano, Hawaii",earthquake',
  '2015-05-04T12:24:10.370Z,Balleny Islands region,5.4,mb,,100,7.271,0.47,us,us20002b6b,2015-05-04T17:58:40.000Z,"Balleny Islands region",earthquake',
  '2015-05-04T11:56:42.373Z, Nevada,3.67,ml,19,75.39,0.742,0.2143,nn,nn00492632,2015-05-04T12:43:17.622Z,"42km NNW of Currant, Nevada",earthquake',
  '2015-05-04T11:30:38.620Z, Iran,4.9,mb,,85,4.658,0.57,us,us20002b5q,2015-05-04T11:49:33.310Z,"103km SSE of Iranshahr, Iran",earthquake',
  '2015-05-04T11:02:34.430Z,North of Ascension Island,4.7,mb,,120,11.324,0.54,us,us20002b5l,2015-05-04T11:56:13.054Z,"North of Ascension Island",earthquake',
  '2015-05-04T08:20:37.350Z, Guatemala,4.7,mb,,148,0.959,1.08,us,us20002b4s,2015-05-04T13:21:13.445Z,"10km SE of Cuilco, Guatemala",earthquake',
  '2015-05-04T08:09:14.810Z, Papua New Guinea,5.1,mb,,90,1.422,0.99,us,us20002b4m,2015-05-04T16:11:46.731Z,"143km SSW of Kokopo, Papua New Guinea",earthquake',
  '2015-05-04T06:55:43.310Z, Indonesia,5.1,mb,,90,1.326,1.09,us,us20002b44,2015-05-04T14:58:13.664Z,"138km ENE of Bitung, Indonesia",earthquake',
  '2015-05-04T04:26:06.470Z, Tonga,4.5,mb,,68,3.552,0.71,us,us20002b3m,2015-05-04T12:28:35.916Z,"114km W of Hihifo, Tonga",earthquake',
  '2015-05-04T04:07:36.440Z, Greece,4.7,mb,,57,0.877,0.81,us,us20002b3h,2015-05-04T12:11:39.421Z,"64km S of Pirgos, Greece",earthquake',
  '2015-05-04T04:06:12.500Z, Puerto Rico,3,Md,9,316.8,0.90729844,0.28,pr,pr15124001,2015-05-04T12:08:54.332Z,"55km NW of Rincon, Puerto Rico",earthquake',
  '2015-05-04T02:29:11.030Z, New Zealand,5.6,mb,,47,0.319,0.74,us,us20002b38,2015-05-04T15:09:20.040Z,"30km NW of Wanaka, New Zealand",earthquake',
  '2015-05-04T01:30:06.740Z, Oklahoma,3.4,mb_lg,,92,0.258,0.19,us,us20002b32,2015-05-04T02:14:15.661Z,"19km SW of Medford, Oklahoma",earthquake',
  '2015-05-04T01:16:17.240Z, Japan,4.5,mb,,104,0.679,0.83,us,us20002b34,2015-05-04T09:20:11.944Z,"74km SW of Yonakuni, Japan",earthquake',
  '2015-05-04T01:15:07.150Z, Nepal,4.4,mb,,93,0.794,0.71,us,us20002b2y,2015-05-04T17:07:53.144Z,"34km NNW of Ramechhap, Nepal",earthquake',
  '2015-05-04T01:04:48.880Z, Papua New Guinea,4.6,mb,,95,1.065,1.13,us,us20002b2x,2015-05-04T09:09:43.448Z,"102km SSW of Kokopo, Papua New Guinea",earthquake',
  '2015-05-04T00:40:58.140Z, Peru,4.2,mb,,136,3.117,0.92,us,us20002b2u,2015-05-04T08:43:30.679Z,"50km W of Lluta, Peru",earthquake',
  '2015-05-03T23:40:56.120Z, Papua New Guinea,5.2,mb,,54,1.325,1.01,us,us20002b2k,2015-05-04T15:30:48.040Z,"132km SSW of Kokopo, Papua New Guinea",earthquake',
  '2015-05-03T23:14:15.220Z, Nepal,4.1,mb,,153,0.849,1.15,us,us20002b2a,2015-05-04T07:16:44.793Z,"26km SSW of Kodari, Nepal",earthquake',
  '2015-05-03T22:50:47.550Z, Papua New Guinea,5.1,mb,,89,1.334,0.81,us,us20002b21,2015-05-04T06:54:11.541Z,"133km SSW of Kokopo, Papua New Guinea",earthquake',
  '2015-05-03T22:38:05.800Z, British Virgin Islands,3.1,Md,3,284.4,0.51563297,0.15,pr,pr15123006,2015-05-04T06:40:31.432Z,"82km N of Road Town, British Virgin Islands",earthquake',
  '2015-05-03T22:35:11.840Z, Papua New Guinea,5.5,mb,,50,1.408,0.76,us,us20002b1x,2015-05-04T06:37:39.181Z,"142km SSW of Kokopo, Papua New Guinea",earthquake',
  '2015-05-03T22:32:42.130Z, Papua New Guinea,5.6,mb,,25,1.414,1.33,us,us20002b1r,2015-05-04T18:41:33.000Z,"144km SSW of Kokopo, Papua New Guinea",earthquake',
  '2015-05-03T22:13:19.400Z, California,3.64,mw,82,47,0.05994,0.13,nc,nc72439615,2015-05-04T18:39:50.713Z,"1km S of Concord, California",earthquake',
  '2015-05-03T20:43:38.430Z, Pakistan,4.3,mb,,223,6.026,1.27,us,us20002b12,2015-05-04T04:46:29.391Z,"52km E of Gwadar, Pakistan",earthquake',
  '2015-05-03T20:21:56.360Z, Papua New Guinea,5.2,mb,,132,5.795,0.86,us,us20002b11,2015-05-04T04:24:52.110Z,"150km SSW of Kokopo, Papua New Guinea",earthquake',
  '2015-05-03T19:28:54.950Z, Papua New Guinea,4.8,mb,,83,1.472,0.91,us,us20002b0w,2015-05-04T03:36:55.751Z,"148km SSW of Kokopo, Papua New Guinea",earthquake',
  '2015-05-03T16:46:18.810Z, Greece,4.2,mb,,118,0.549,1.09,us,us20002b0c,2015-05-04T00:49:32.036Z,"59km SSW of Karpathos, Greece",earthquake',
  '2015-05-03T15:11:16.040Z, Texas,3.2,mb_lg,,58,0.02,0.51,us,us20002azv,2015-05-04T16:15:05.495Z,"4km N of Irving, Texas",earthquake',
  
  ];

  /// Del string gigante recorrerlo, separarlo por comas, de eso tomar el anteultimo elemento qeu es el pais

  function recorreSepara(arr){
     
     var paises={};
     var arrElemento=[];

     for(var i=0; i< arr.length ; i++){
         
       arrElemento = arr[i].split(',');
       var pais = arrElemento[arrElemento.length - 2];

      if(paises[pais] === undefined){
      	  paises[pais] = 1;
      } else {
           paises[pais] ++;
      }

    }
     return paises;
  }




// Convertir objeto en array de objetos.


function devuelveArrFinal(obj){
   
   var res	= []; 
   var keyArray= Object.keys(obj);

   for(var i=0; i< keyArray.length; i++){
   		
       var country = {name: keyArray[i].trim(), value: obj[keyArray[i]]};
       res.push(country);

   } 
	return res;
}

console.log(devuelveArrFinal(recorreSepara(arrGigante)));

</script>
</body>
</html>